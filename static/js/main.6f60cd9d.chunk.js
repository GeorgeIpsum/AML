(window.webpackJsonpaml=window.webpackJsonpaml||[]).push([[0],{129:function(t,e,n){},130:function(t,e,n){},133:function(t,e,n){},134:function(t,e,n){"use strict";n.r(e);var a,r=n(1),s=n.n(r),o=n(20),i=n.n(o),u=(n(52),n(6)),c=n.n(u),p=n(12),d=n(7),l=n(10),h=n(14),f=n(13),m=n(15),v=(n(54),n(4)),g=n(46);!function(t){t.unprocessed="unprocessed",t.trashed="trashed",t.incubated="incubated",t.referenced="referenced",t.actedUpon="acted upon",t.deferred="deferred",t.delegated="delegated",t.addedToProject="added to project"}(a||(a={}));var b=v.d.model("Deposit").props({id:v.d.optional(v.d.identifier,"xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx"),value:v.d.string,status:v.d.optional(v.d.enumeration("DepositStatus",Object.values(a)),a.unprocessed),dateAdded:v.d.optional(v.d.Date,new Date),dateEdited:v.d.optional(v.d.Date,new Date),hash:v.d.optional(v.d.string,"")}).actions(function(t){return{setId:function(e){t.id=e},setValue:function(e){t.value=e,t.dateEdited=new Date},setStatus:function(e){t.status=e,t.dateEdited=new Date}}}),S=n(2);var O="function"===typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e,n,a=Object(t),r=1,s=arguments.length;r<s;){var o=arguments[r];if(null!=o)for(var i in o)e=i,n=o,Object.prototype.hasOwnProperty.call(n,e)&&(a[i]=o[i]);r+=1}return a};function k(t){return null!=t&&"object"===typeof t&&!0===t["@@functional/placeholder"]}function j(t){return function e(n){return 0===arguments.length||k(n)?e:t.apply(this,arguments)}}var y=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};var x=j(function(t){return!!y(t)||!!t&&("object"===typeof t&&(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))});var w,E,D=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})},I=(j(function(t){return O.apply(null,[{}].concat(t))}),j((w=!0,function t(e){for(var n,a,r,s=[],o=0,i=e.length;o<i;){if(x(e[o]))for(r=0,a=(n=w?t(e[o]):e[o]).length;r<a;)s[s.length]=n[r],r+=1;else s[s.length]=e[o];o+=1}return s})),j(function(t){return null==t})),C=n(44);!function(t){t.idle="idle",t.pending="pending",t.done="done",t.error="error"}(E||(E={}));var N=v.d.model("DepositListStore").props({status:v.d.optional(v.d.enumeration("DepositStoreStatus",Object.values(E)),E.idle),deposits:v.d.optional(v.d.array(b),[])}).actions(function(t){return{setStatus:function(e){t.status=e},setDeposits:function(e){t.deposits?e?t.deposits.replace(e):t.deposits.clear():t.deposits=e},addDeposit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:"",status:a.unprocessed},n=e.value,r=e.status;if(t.deposits){var s=b.create({id:D(),value:n,status:r,dateAdded:new Date,dateEdited:new Date,hash:C({value:n,status:r,dateAdded:new Date})}),o=[].concat(Object(g.a)(t.deposits),[s]);return t.deposits.replace(o),!0}return!1},changeDeposit:function(e,n){var a=n.value,r=n.status;t.deposits&&t.deposits[e]&&(a&&t.deposits[e].setValue(a),r&&t.deposits[e].setStatus(r))}}}).views(function(t){return{get environment(){return Object(v.a)(t)},get rootStore(){return Object(v.b)(t)},get isLoading(){return"pending"===t.status},get chronoView(){return t.deposits.slice().sort(function(t,e){return t.dateAdded.getTime()<e.dateAdded.getTime()?1:-1})}}}).actions(function(t){return{loadDeposits:Object(S.m)(c.a.mark(function e(){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setStatus(E.pending),e.prev=1,e.next=4,t.environment.depositApi.getDeposits();case 4:"ok"===(n=e.sent).kind?(t.setDeposits(n.deposits),t.setStatus(E.done)):t.setStatus(E.error),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.setStatus(E.error);case 11:case"end":return e.stop()}},e,null,[[1,8]])}))}}),R=v.d.model("RootStore").props({depositStore:v.d.optional(N,{}),user:v.d.optional(v.d.string,"")}).views(function(t){return{get environment(){return Object(v.a)(t)}}}).actions(function(t){return{signIn:function(e,n){return t.environment.api.signInUser(e,n)}}}),A=function t(){Object(d.a)(this,t),this.api=void 0,this.depositApi=void 0},U={apiKey:"AIzaSyDybjxbtMFzbsgvA7uvJmsFGEOwTJj7K6U",authDomain:"aml-gtd.firebaseapp.com",databaseURL:"https://aml-gtd.firebaseio.com",projectId:"aml-gtd",storageBucket:"",messagingSenderId:"653540895247",appId:"1:653540895247:web:b1c2472b5324d76b"},T=function(t){var e=localStorage.getItem(t);return"string"===typeof e?JSON.parse(e):null},F=function(t,e){try{return"object"===typeof e?localStorage.setItem(t,JSON.stringify(e)):localStorage.setItem(t,e),!0}catch(n){return!1}},L=n(26);function P(t){switch(t.problem){case"CONNECTION_ERROR":case"NETWORK_ERROR":return{kind:"cannot-connect",temporary:!0};case"TIMEOUT_ERROR":return{kind:"timeout",temporary:!0};case"SERVER_ERROR":return{kind:"server"};case"UNKNOWN_ERROR":return{kind:"unknown",temporary:!0};case"CLIENT_ERROR":switch(t.status){case 401:return{kind:"unauthorized"};case 403:return{kind:"forbidden"};default:return{kind:"rejected"}}case"CANCEL_ERROR":return null}return null}var B={url:"https://api.github.com",timeout:1e3},V=n(31),_=n.n(V),z=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;Object(d.a)(this,t),this.apisauce=void 0,this.config=void 0,this.auth=void 0,this.user=void 0,this.createUser=function(t,n){e.auth.createUserWithEmailAndPassword(t,n).then(function(t){e.user=t.user},function(a){e.signInUser(t,n)})},this.signInUser=function(t,n){return e.auth.signInWithEmailAndPassword(t,n)},this.signOutUser=function(){return e.auth.signOut()},this.config=n,this.user={email:"test"}}return Object(l.a)(t,[{key:"setup",value:function(){this.apisauce=Object(L.create)({baseURL:this.config.url,timeout:this.config.timeout,headers:{}}),_.a.initializeApp(U),this.auth=_.a.auth()}},{key:"getUser",value:function(){var t=Object(p.a)(c.a.mark(function t(e){var n,a,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apisauce.get("/users/".concat(e));case 2:if((n=t.sent).ok){t.next=7;break}if(!(a=P(n))){t.next=7;break}return t.abrupt("return",a);case 7:return t.prev=7,r={},t.abrupt("return",{kind:"ok",user:r});case 12:return t.prev=12,t.t0=t.catch(7),t.abrupt("return",{kind:"bad-data"});case 15:case"end":return t.stop()}},t,this,[[7,12]])}));return function(e){return t.apply(this,arguments)}}()}]),t}(),J=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;Object(d.a)(this,t),this.apisauce=void 0,this.config=void 0,this.config=e}return Object(l.a)(t,[{key:"setup",value:function(){try{this.apisauce=Object(L.create)({baseURL:this.config.url,timeout:this.config.timeout,headers:{Accept:"application/json"}})}catch(t){console.error(t.message)}}},{key:"getDeposits",value:function(){var t=Object(p.a)(c.a.mark(function t(e){var n,a,r,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=I(e)?{}:{completed:e},t.next=3,this.apisauce.get("/deposits",n);case 3:if((a=t.sent).ok){t.next=8;break}if(!(r=P(a))){t.next=8;break}return t.abrupt("return",r);case 8:return t.prev=8,s=a.data,t.abrupt("return",{kind:"ok",deposits:s});case 13:return t.prev=13,t.t0=t.catch(8),t.abrupt("return",{kind:"bad-data"});case 16:case"end":return t.stop()}},t,this,[[8,13]])}));return function(e){return t.apply(this,arguments)}}()}]),t}(),W="AML";function M(){return K.apply(this,arguments)}function K(){return(K=Object(p.a)(c.a.mark(function t(){var e,n,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:return a=t.sent,t.prev=3,t.next=6,T(W);case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:n=t.t0,e=R.create(n,a),t.next=16;break;case 13:t.prev=13,t.t1=t.catch(3),e=R.create({},a);case 16:return Object(v.c)(e,function(t){return F(W,t)}),t.abrupt("return",e);case 18:case"end":return t.stop()}},t,null,[[3,13]])}))).apply(this,arguments)}function G(){return H.apply(this,arguments)}function H(){return(H=Object(p.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=new A).api=new z,e.depositApi=new J,t.next=5,e.api.setup();case 5:return t.next=7,e.depositApi.setup();case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}var $,q,Q,X=n(18),Y=(n(129),n(130),n(136)),Z=Object(X.a)($=function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(h.a)(this,Object(f.a)(e).call(this,t))).onFormSubmit=function(t){t.preventDefault(),""!==n.state.formInput&&n.props.onSubmit(n.state.formInput),n.setState({formInput:""})},n.onInputChange=function(t){n.setState({formInput:t.target.value})},n.clearForm=function(t){n.setState({formInput:""})},n.parseInput=function(t){var e={input:t,place:"",time:""};if(t.search("@")){var n=t.split("@");n[1]&&(e.place=n[1],n[2]?e.input=n[0]+""+n[2]:e.input=n[0])}return e},n.state={formInput:""},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.parseInput(this.state.formInput);return s.a.createElement("div",{className:"Deposit-Form"},s.a.createElement("form",{onSubmit:this.onFormSubmit,className:"Deposit-Form-Form"},s.a.createElement("input",{type:"text",value:this.state.formInput,onChange:this.onInputChange,className:"Deposit-Form-Input"}),s.a.createElement("div",{className:"Input-Border"}),s.a.createElement("input",{type:"submit",className:"Button Deposit-Submit",value:"Add"}),""!==this.state.formInput?s.a.createElement("button",{type:"button",className:"Button Deposit-Clear",onClick:this.clearForm},s.a.createElement(Y.a,{size:20})):null),s.a.createElement("div",{className:"Parsed-Input"},s.a.createElement("div",{className:"Base-Input"},t.input),""!==t.place&&s.a.createElement("div",{className:"Place-Input"},s.a.createElement("span",null,"Place: ")," ",t.place)))}}]),e}(s.a.Component))||$,tt=(n(133),function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(h.a)(this,Object(f.a)(e).call(this,t))).onCheckChange=function(t){n.setState({checked:!n.state.checked}),n.props.changeStatus(t,n.props.hash)},n.state={checked:n.props.status},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"Deposit-List-Item"},s.a.createElement("div",{className:"Deposit-Check"},s.a.createElement("input",{type:"checkbox",checked:this.state.checked,onChange:this.onCheckChange})),s.a.createElement("div",{className:"Deposit-Value"},s.a.createElement("div",{className:"Value",style:{textDecoration:this.state.checked?"line-through":"none",textDecorationColor:"rgba(255,255,255,0.7)"}},this.props.value),s.a.createElement("div",{className:"Date"},this.props.date.toDateString())))}}]),e}(s.a.Component)),et=Object(X.a)(q=function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(h.a)(this,Object(f.a)(e).call(this,t))).onDepositFormSubmit=function(t){var e={value:t,status:a.unprocessed};n.props.depositStore.addDeposit(e)},n.onClear=function(t){n.props.depositStore.setDeposits(null)},n.onChangeStatus=function(t,e){var r=n.props.depositStore.deposits.findIndex(function(t){return t.hash===e});n.props.depositStore.changeDeposit(r,{status:n.props.depositStore.deposits[r].status===a.unprocessed?a.actedUpon:a.unprocessed})},n.changeShown=function(){n.setState({hide:!n.state.hide})},n.state={value:"",test:"",hide:!0},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.props.depositStore.chronoView.map(function(e){return t.state.hide?s.a.createElement(tt,{key:e.hash,hash:e.hash,value:e.value,status:e.status!==a.unprocessed,date:e.dateAdded,changeStatus:t.onChangeStatus}):e.status===a.unprocessed?s.a.createElement(tt,{key:e.hash,hash:e.hash,value:e.value,status:e.status!==a.unprocessed,date:e.dateAdded,changeStatus:t.onChangeStatus}):null});return s.a.createElement("div",{className:"Root"},s.a.createElement(Z,{onSubmit:this.onDepositFormSubmit}),e,s.a.createElement("button",{type:"button",onClick:this.onClear},"Clear Deposits"),s.a.createElement("button",{type:"button",onClick:this.changeShown},this.state.hide?"Hide Finished":"Show Finished"))}}]),e}(s.a.Component))||q,nt=Object(X.a)(Q=function(t){function e(){var t,n;Object(d.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(h.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).authStateChange=function(t){t&&t.email?(t.email&&console.log("root store",t.email),n.setState({userState:{email:t.email}})):n.setState({userState:{email:"not logged in"}})},n.authStateChangeError=function(t){console.log(t)},n.changeTheme=function(){n.setState({themeDark:!n.state.themeDark})},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=Object(p.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M();case 2:e=t.sent,this.setState({userState:{},themeDark:!0,rootStore:e}),e.environment.api.auth.onAuthStateChanged(this.authStateChange,this.authStateChangeError);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state&&this.state.rootStore,e=this.state&&this.state.userState&&this.state.userState.email;if(!t)return s.a.createElement("div",null,"Initializing...");var n=t.depositStore;return s.a.createElement("div",{className:this.state.themeDark?"App Dark":"App Light"},s.a.createElement("div",{className:"App-inner"},e||"Loading...",s.a.createElement(et,{rootStore:t,depositStore:n})),s.a.createElement("button",{type:"button",className:"Button Theme",onClick:this.changeTheme},"Change Theme"))}}]),e}(s.a.Component))||Q;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},47:function(t,e,n){t.exports=n(134)},52:function(t,e,n){},54:function(t,e,n){}},[[47,1,2]]]);
//# sourceMappingURL=main.6f60cd9d.chunk.js.map