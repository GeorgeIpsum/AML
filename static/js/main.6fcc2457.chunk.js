(window.webpackJsonpaml=window.webpackJsonpaml||[]).push([[0],{131:function(t,e,n){},132:function(t,e,n){},133:function(t,e,n){},136:function(t,e,n){},137:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),o=n(21),s=n.n(o),i=(n(53),n(5)),c=n.n(i),u=n(12),d=n(6),p=n(8),l=n(14),h=n(13),f=n(15),m=(n(55),n(45));n(56);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(n,!0).forEach(function(e){Object(m.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var b,x=function(t){var e=t.variant&&t.variant,n="#3454D1";if(e)switch(e){case"theme":n="#922D50";break;default:n="#3454D1"}return a.a.createElement("button",{style:v({background:n},t.style),type:"button",className:"Button",onClick:t.onClick},t.children)},O=n(4),S=n(27);!function(t){t.unprocessed="unprocessed",t.trashed="trashed",t.incubated="incubated",t.referenced="referenced",t.actedUpon="acted upon",t.deferred="deferred",t.delegated="delegated",t.addedToProject="added to project"}(b||(b={}));var j=O.d.model("Deposit").props({id:O.d.optional(O.d.identifier,"xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx"),value:O.d.string,status:O.d.optional(O.d.enumeration("DepositStatus",Object.values(b)),b.unprocessed),dateAdded:O.d.optional(O.d.Date,new Date),dateEdited:O.d.optional(O.d.Date,new Date),hash:O.d.optional(O.d.string,""),context:O.d.string}).actions(function(t){return{setId:function(e){t.id=e},setValue:function(e){t.value=e,t.dateEdited=new Date},setStatus:function(e){t.status=e,t.dateEdited=new Date}}}),y=n(2);var k="function"===typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e,n,r=Object(t),a=1,o=arguments.length;a<o;){var s=arguments[a];if(null!=s)for(var i in s)e=i,n=s,Object.prototype.hasOwnProperty.call(n,e)&&(r[i]=s[i]);a+=1}return r};function w(t){return null!=t&&"object"===typeof t&&!0===t["@@functional/placeholder"]}function C(t){return function e(n){return 0===arguments.length||w(n)?e:t.apply(this,arguments)}}var E=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};var D=C(function(t){return!!E(t)||!!t&&("object"===typeof t&&(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))});var A,N,I=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})},R=(C(function(t){return k.apply(null,[{}].concat(t))}),C((A=!0,function t(e){for(var n,r,a,o=[],s=0,i=e.length;s<i;){if(D(e[s]))for(a=0,r=(n=A?t(e[s]):e[s]).length;a<r;)o[o.length]=n[a],a+=1;else o[o.length]=e[s];s+=1}return o})),C(function(t){return null==t})),T=n(46);!function(t){t.idle="idle",t.pending="pending",t.done="done",t.error="error"}(N||(N={}));var U=O.d.model("DepositListStore").props({status:O.d.optional(O.d.enumeration("DepositListLoadingStatus",Object.values(N)),N.idle),deposits:O.d.optional(O.d.array(j),[])}).actions(function(t){return{setStatus:function(e){t.status=e},setDeposits:function(e){t.deposits?e?t.deposits.replace(e):t.deposits.clear():t.deposits=e},addDeposit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:"",status:b.unprocessed,context:""},n=e.value,r=e.status,a=e.context;if(t.deposits){var o=j.create({id:I(),value:n,status:r,dateAdded:new Date,dateEdited:new Date,hash:T({value:n,status:r,dateAdded:new Date}),context:a}),s=[].concat(Object(S.a)(t.deposits),[o]);return t.deposits.replace(s),!0}return!1},changeDeposit:function(e,n){var r=n.value,a=n.status;return!(!t.deposits||!t.deposits[e])&&(r&&""!==r?(t.deposits[e].setValue(r),!0):!(!a||""===a)&&(t.deposits[e].setStatus(a),!0))}}}).views(function(t){return{get environment(){return Object(O.a)(t)},get rootStore(){return Object(O.b)(t)},get isLoading(){return"pending"===t.status},get chronological(){return t.deposits.slice().sort(function(t,e){return t.dateAdded.getTime()<e.dateAdded.getTime()?1:t.dateAdded.getTime()>e.dateAdded.getTime()?-1:0})}}}).actions(function(t){return{loadDeposits:Object(y.m)(c.a.mark(function e(){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setStatus(N.pending),e.prev=1,e.next=4,t.environment.depositApi.getDeposits();case 4:"ok"===(n=e.sent).kind?(t.setDeposits(n.deposits),t.setStatus(N.done)):t.setStatus(N.error),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.setStatus(N.error);case 11:case"end":return e.stop()}},e,null,[[1,8]])}))}}).views(function(t){return{chronoView:function(e){return e?e.slice().sort(function(t,e){return t.dateAdded.getTime()<e.dateAdded.getTime()?1:t.dateAdded.getTime()>e.dateAdded.getTime()?-1:0}):t.chronological},findByContext:function(e){return t.deposits.filter(function(t){return t.context===e})}}}),L=O.d.model("Context").props({id:O.d.identifier,name:O.d.string}).actions(function(t){return{setName:function(e){t.name=e}}}).views(function(t){return{get deposits(){var e=Object(O.b)(t);return e&&e.depositStore?e.depositStore.findByContext(t.id):(console.log(e),[])}}}),F=O.d.model("ContextListStore").props({status:O.d.optional(O.d.enumeration("ContextListLoadingStatus",Object.values(N)),N.idle),contexts:O.d.optional(O.d.array(L),[])}).actions(function(t){return{setStatus:function(e){t.status=e},setContexts:function(e){t.contexts?e?t.contexts.replace(e):t.contexts.clear():t.contexts=e},addContext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t.contexts){var n=L.create({id:I(),name:e}),r=[].concat(Object(S.a)(t.contexts),[n]);return t.contexts.replace(r),!0}return!1},changeContext:function(e,n){return!(!t.contexts||!t.contexts[e])&&(!!n&&(t.contexts[e].setName(n),!0))}}}).views(function(t){return{get environment(){return Object(O.a)(t)},get rootStore(){return Object(O.b)(t)},get isLoading(){return"pending"===t.status},get alphabetical(){return t.contexts.slice().sort(function(t,e){var n=t.name.toUpperCase(),r=e.name.toUpperCase();return r<n?-1:n>r?1:0})}}}).actions(function(t){return{findByName:function(e){var n=t.contexts.find(function(t){return t.name===e});return n||!1}}}),P=O.d.model("RootStore").props({depositStore:O.d.optional(U,{}),contextStore:O.d.optional(F,{}),user:O.d.optional(O.d.string,"")}).views(function(t){return{get environment(){return Object(O.a)(t)}}}).actions(function(t){return{signIn:function(e,n){return t.environment.api.signInUser(e,n)}}}),B=function t(){Object(d.a)(this,t),this.api=void 0,this.depositApi=void 0,this.contextApi=void 0},V={apiKey:"AIzaSyDybjxbtMFzbsgvA7uvJmsFGEOwTJj7K6U",authDomain:"aml-gtd.firebaseapp.com",databaseURL:"https://aml-gtd.firebaseio.com",projectId:"aml-gtd",storageBucket:"",messagingSenderId:"653540895247",appId:"1:653540895247:web:b1c2472b5324d76b"},_=function(t){var e=localStorage.getItem(t);return"string"===typeof e?JSON.parse(e):null},z=function(t,e){try{return"object"===typeof e?localStorage.setItem(t,JSON.stringify(e)):localStorage.setItem(t,e),!0}catch(n){return!1}},J=n(19);function W(t){switch(t.problem){case"CONNECTION_ERROR":case"NETWORK_ERROR":return{kind:"cannot-connect",temporary:!0};case"TIMEOUT_ERROR":return{kind:"timeout",temporary:!0};case"SERVER_ERROR":return{kind:"server"};case"UNKNOWN_ERROR":return{kind:"unknown",temporary:!0};case"CLIENT_ERROR":switch(t.status){case 401:return{kind:"unauthorized"};case 403:return{kind:"forbidden"};default:return{kind:"rejected"}}case"CANCEL_ERROR":return null}return null}var M={url:"https://api.github.com",timeout:1e3},K=n(32),G=n.n(K),H=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;Object(d.a)(this,t),this.apisauce=void 0,this.config=void 0,this.auth=void 0,this.user=void 0,this.createUser=function(t,n){e.auth.createUserWithEmailAndPassword(t,n).then(function(t){e.user=t.user},function(r){e.signInUser(t,n)})},this.signInUser=function(t,n){return e.auth.signInWithEmailAndPassword(t,n)},this.signOutUser=function(){return e.auth.signOut()},this.config=n,this.user={email:"test"}}return Object(p.a)(t,[{key:"setup",value:function(){this.apisauce=Object(J.create)({baseURL:this.config.url,timeout:this.config.timeout,headers:{}}),G.a.initializeApp(V),this.auth=G.a.auth()}},{key:"getUser",value:function(){var t=Object(u.a)(c.a.mark(function t(e){var n,r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apisauce.get("/users/".concat(e));case 2:if((n=t.sent).ok){t.next=7;break}if(!(r=W(n))){t.next=7;break}return t.abrupt("return",r);case 7:return t.prev=7,a={},t.abrupt("return",{kind:"ok",user:a});case 12:return t.prev=12,t.t0=t.catch(7),t.abrupt("return",{kind:"bad-data"});case 15:case"end":return t.stop()}},t,this,[[7,12]])}));return function(e){return t.apply(this,arguments)}}()}]),t}(),$=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;Object(d.a)(this,t),this.apisauce=void 0,this.config=void 0,this.config=e}return Object(p.a)(t,[{key:"setup",value:function(){try{this.apisauce=Object(J.create)({baseURL:this.config.url,timeout:this.config.timeout,headers:{Accept:"application/json"}})}catch(t){console.error(t.message)}}},{key:"getDeposits",value:function(){var t=Object(u.a)(c.a.mark(function t(e){var n,r,a,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=R(e)?{}:{completed:e},t.next=3,this.apisauce.get("/deposits",n);case 3:if((r=t.sent).ok){t.next=8;break}if(!(a=W(r))){t.next=8;break}return t.abrupt("return",a);case 8:return t.prev=8,o=r.data,t.abrupt("return",{kind:"ok",deposits:o});case 13:return t.prev=13,t.t0=t.catch(8),t.abrupt("return",{kind:"bad-data"});case 16:case"end":return t.stop()}},t,this,[[8,13]])}));return function(e){return t.apply(this,arguments)}}()}]),t}(),q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;Object(d.a)(this,t),this.apisauce=void 0,this.config=void 0,this.config=e}return Object(p.a)(t,[{key:"setup",value:function(){try{this.apisauce=Object(J.create)({baseURL:this.config.url,timeout:this.config.timeout,headers:{Accept:"application/json"}})}catch(t){console.error(t.message)}}},{key:"getContexts",value:function(){var t=Object(u.a)(c.a.mark(function t(e){var n,r,a,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=R(e)?{}:{completed:e},t.next=3,this.apisauce.get("/contexts",n);case 3:if((r=t.sent).ok){t.next=8;break}if(!(a=W(r))){t.next=8;break}return t.abrupt("return",a);case 8:return t.prev=8,o=r.data,t.abrupt("return",{kind:"ok",contexts:o});case 13:return t.prev=13,t.t0=t.catch(8),t.abrupt("return",{kind:"bad-data"});case 16:case"end":return t.stop()}},t,this,[[8,13]])}));return function(e){return t.apply(this,arguments)}}()}]),t}(),Q="AML";function X(){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(c.a.mark(function t(){var e,n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z();case 2:return r=t.sent,t.prev=3,t.next=6,_(Q);case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:n=t.t0,e=P.create(n,r),t.next=16;break;case 13:t.prev=13,t.t1=t.catch(3),e=P.create({},r);case 16:return Object(O.c)(e,function(t){return z(Q,t)}),t.abrupt("return",e);case 18:case"end":return t.stop()}},t,null,[[3,13]])}))).apply(this,arguments)}function Z(){return tt.apply(this,arguments)}function tt(){return(tt=Object(u.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=new B).api=new H,e.depositApi=new $,e.contextApi=new q,t.next=6,e.api.setup();case 6:return t.next=8,e.depositApi.setup();case 8:return t.next=10,e.contextApi.setup();case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}},t)}))).apply(this,arguments)}var et,nt,rt,at,ot=n(16),st=(n(131),n(132),n(139)),it=(n(133),Object(ot.a)(et=function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(l.a)(this,Object(h.a)(e).call(this,t))).onContextChange=function(t){n.setState({selected:t.target.value}),n.findByName(t.target.value)?n.setState({add:!1}):n.setState({add:!0})},n.findByName=function(t){if(n.props.contexts){var e=n.props.contexts.find(function(e){return e.name===t});return e||!1}return!1},n.state={selected:"",add:!1},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props&&this.props.contexts&&this.props.contexts.slice().map(function(t){return a.a.createElement("option",{key:t.id,value:t.name})});return a.a.createElement("div",{className:"Context"},a.a.createElement("input",{placeholder:"Context",type:"text",list:"context",onChange:this.onContextChange,className:"Context-Select"}),a.a.createElement("datalist",{id:"context"},t),a.a.createElement("div",{className:"add",onClick:this.props.addContext(this.state.selected)},this.state.add?"Add Context":""))}}]),e}(a.a.Component))||et),ct=Object(ot.a)(nt=function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(l.a)(this,Object(h.a)(e).call(this,t))).onFormSubmit=function(t){t.preventDefault(),""!==n.state.formInput&&n.props.onSubmit(n.state.formInput),n.setState({formInput:""})},n.onInputChange=function(t){n.setState({formInput:t.target.value})},n.clearForm=function(t){n.setState({formInput:""})},n.addContext=function(t){n.props.store.contextStore.findByName(t)||n.props.store.contextStore.addContext(t)},n.state={formInput:""},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props&&this.props.store&&this.props.store.contextStore&&this.props.store.contextStore.contexts;return a.a.createElement("div",{className:"Deposit-Form"},a.a.createElement("form",{onSubmit:this.onFormSubmit,className:"Deposit-Form-Form"},a.a.createElement("input",{type:"text",value:this.state.formInput,onChange:this.onInputChange,className:"Deposit-Form-Input"}),a.a.createElement("div",{className:"Input-Border"}),a.a.createElement("input",{type:"submit",className:"Button Deposit-Submit",value:"Add"}),""!==this.state.formInput?a.a.createElement("button",{type:"button",className:"Button Deposit-Clear",onClick:this.clearForm},a.a.createElement(st.a,{size:20})):null),a.a.createElement("div",{className:"Selections"},a.a.createElement(it,{contexts:t,addContext:this.addContext})))}}]),e}(a.a.Component))||nt,ut=(n(136),function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(l.a)(this,Object(h.a)(e).call(this,t))).onCheckChange=function(t){n.setState({checked:!n.state.checked}),n.props.changeStatus(t,n.props.hash)},n.state={checked:n.props.status},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"Deposit-List-Item"},a.a.createElement("div",{className:"Deposit-Check"},a.a.createElement("input",{type:"checkbox",checked:this.state.checked,onChange:this.onCheckChange})),a.a.createElement("div",{className:"Deposit-Value"},a.a.createElement("div",{className:"Value",style:{textDecoration:this.state.checked?"line-through":"none",textDecorationColor:"rgba(255,255,255,0.7)"}},this.props.value),a.a.createElement("div",{className:"Date"},this.props.date.toDateString())))}}]),e}(a.a.Component)),dt=Object(ot.a)(rt=function(t){function e(t){var n;return Object(d.a)(this,e),(n=Object(l.a)(this,Object(h.a)(e).call(this,t))).onDepositFormSubmit=function(t){var e={value:t,status:b.unprocessed,context:""};n.props.depositStore.addDeposit(e)},n.onClear=function(t){n.props.depositStore.setDeposits(null)},n.onChangeStatus=function(t,e){var r=n.props.depositStore.deposits.findIndex(function(t){return t.hash===e});n.props.depositStore.changeDeposit(r,{value:"",status:n.props.depositStore.deposits[r].status===b.unprocessed?b.actedUpon:b.unprocessed})},n.changeShown=function(){n.setState({hide:!n.state.hide})},n.state={value:"",test:"",hide:!0},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this,e=this.props.depositStore.chronological.map(function(e){return t.state.hide?a.a.createElement(ut,{key:e.hash,hash:e.hash,value:e.value,status:e.status!==b.unprocessed,date:e.dateAdded,changeStatus:t.onChangeStatus}):e.status===b.unprocessed?a.a.createElement(ut,{key:e.hash,hash:e.hash,value:e.value,status:e.status!==b.unprocessed,date:e.dateAdded,changeStatus:t.onChangeStatus}):null});return a.a.createElement("div",{className:"Root"},a.a.createElement(ct,{onSubmit:this.onDepositFormSubmit,store:this.props.rootStore}),e,a.a.createElement(x,{style:{padding:"0.5rem",marginRight:"0.4rem"},onClick:this.onClear},"Clear Deposits"),a.a.createElement(x,{style:{padding:"0.5rem"},onClick:this.changeShown},this.state.hide?"Hide Finished":"Show Finished"))}}]),e}(a.a.Component))||rt,pt=Object(ot.a)(at=function(t){function e(){var t,n;Object(d.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(a)))).authStateChange=function(t){t&&t.email?n.setState({userState:{email:t.email}}):n.setState({userState:{email:"not logged in"}})},n.authStateChangeError=function(t){console.log(t)},n.changeTheme=function(){n.setState({themeDark:!n.state.themeDark})},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=Object(u.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:e=t.sent,this.setState({userState:{},themeDark:!0,rootStore:e}),e.environment.api.auth.onAuthStateChanged(this.authStateChange,this.authStateChangeError);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state&&this.state.rootStore;if(!t)return a.a.createElement("div",null,"Initializing...");var e=t.depositStore;return a.a.createElement("div",{className:this.state.themeDark?"App Dark":"App Light"},a.a.createElement("div",{className:"App-inner"},a.a.createElement(dt,{rootStore:t,depositStore:e})),a.a.createElement(x,{variant:"theme",style:{position:"fixed",bottom:"1rem",right:"1rem",padding:"0.6rem"},onClick:this.changeTheme},"Change Theme"))}}]),e}(a.a.Component))||at;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(pt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},48:function(t,e,n){t.exports=n(137)},53:function(t,e,n){},55:function(t,e,n){},56:function(t,e,n){}},[[48,1,2]]]);
//# sourceMappingURL=main.6fcc2457.chunk.js.map